<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>Alert Test</title>
        <script>
            window.onload = function () {
                Notification.requestPermission(function () {
                    if (Notification.permission === 'granted') {
                        // user approved.
                        // use of new Notification(...) syntax will now be successful
                    } else if (Notification.permission === 'denied') {
                        // user denied.
                    } else { // Notification.permission === 'default'
                        // user didn’t make a decision.
                        // You can’t send notifications until they grant permission.
                    }
                });
                <!-- setup buttons and sounds -->
                var btnStart = document.getElementById('btnStart');
                var btnStop = document.getElementById('btnStop');
                var sound = document.getElementById('beep');
                var beep;

                var btnStartMsgAlert = document.getElementById('btnStartMsgAlert');
                var btnStopMsgAlert = document.getElementById('btnStopMsgAlert');
                var soundMsg = document.getElementById('msgAlert');
                var msgBeep;


                setupPageElements();


                function setupPageElements(){
                  btnStart.addEventListener('click', function () {
                      var alert = new Notification('Chat sound check', {body: 'Chat notification test. Adjust your audio now!', icon: 'https://libapps.s3.amazonaws.com/customers/207/images/chatBubble.gif'});
                      setTimeout(alert.close.bind(alert), 8000);
                      startAlert();
                  });

                  btnStartMsgAlert.addEventListener('click', function () {
                      var msgAlertBox = new Notification('Message sound check', {body: 'Message notification test. Adjust your audio now!', icon: 'https://libapps.s3.amazonaws.com/customers/207/images/chatBubble.gif'});
                      setTimeout(msgAlertBox.close.bind(msgAlertBox), 8000);
                      msgBeep = setInterval(function () {
                          soundMsg.play();
                      }, 2000);
                  });

                  btnStop.addEventListener('click', function () {
                      stopAlert();
                  });

                  btnStopMsgAlert.addEventListener('click', function () {
                      clearInterval(msgBeep);
                  });
                }

                function startAlert() {
                    beep = setInterval(function () {
                        sound.play();
                    }, 2000);
                }

                function stopAlert() {
                    clearInterval(beep);
                }

            };



        </script>
    </head>

    <body>
      <!--Chat notification -->
        <!--https://laimages.s3.amazonaws.com/data/libchat/chat_beep.mp3 -->
        <h1>Notification Sound Test</h1>
        <audio id="beep" preload="auto" src="chat_beep.mp3"></audio>
        <button id="btnStart">Alert me</button>
        <button id="btnStop">Stop</button>

        <!--Internal message notification -->
        <hr><p>
          <h1>Message Sound Test</h1>
        <audio id="msgAlert" preload="auto" src="chat_msg.mp3"></audio>
        <button id="btnStartMsgAlert">Alert me</button>
        <button id="btnStopMsgAlert">Stop</button>
      </p>


    </body>
</html>
