<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>Alert Test</title>
        <script>
            window.onload = function () {
                Notification.requestPermission(function () {
                    if (Notification.permission === 'granted') {
                        // user approved.
                        // use of new Notification(...) syntax will now be successful
                    } else if (Notification.permission === 'denied') {
                        // user denied.
                    } else { // Notification.permission === 'default'
                        // user didn’t make a decision.
                        // You can’t send notifications until they grant permission.
                    }
                });

                var btnStart = document.getElementById('btnStart');
                var btnStop = document.getElementById('btnStop');
                var sound = document.getElementById('beep');
                var beep;
                
                

                btnStart.addEventListener('click', function () {
                    var alert = new Notification('Sound check', {body: 'Chat notification test. Adjust your audio now!', icon: 'chatBubble.gif'});
                    setTimeout(alert.close.bind(alert), 8000);
                    startAlert();
                });

                btnStop.addEventListener('click', function () {
                    stopAlert();
                });

                function startAlert() {
                    beep = setInterval(function () {
                        sound.play();
                    }, 2000);
                }
                
                function stopAlert() {
                    clearInterval(beep);
                }

            };



        </script>
    </head>

    <body>
        <!--https://laimages.s3.amazonaws.com/data/libchat/chat_beep.mp3 -->
        <audio id="beep" preload="auto" src="chat_beep.mp3"></audio>
        <button id="btnStart">Alert me</button>
        <button id="btnStop">Stop</button>
    </body>
</html>
